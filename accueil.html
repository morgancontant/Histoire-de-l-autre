<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Histoire de l'autre</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
<style>
@font-face {
  font-family: 'MaPolice';
  src: url('fonts/hidayatullah/hidayatullah DEMO.ttf') format('truetype');
}

/* RESET */
* { margin: 0; padding: 0; box-sizing: border-box; }
html, body { height: 100%; overflow-x: hidden; background: #060624; scroll-behavior: smooth;overflow: hidden; }
body { font-family: Arial, Helvetica, sans-serif; color: #f5f5f5; line-height: 1.7; }

/* CANVAS */
#bg-canvas {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  z-index: 0;
}

/* HERO SECTION */
.hero {
  position: relative;
  min-height: 100vh;
  display: flex; flex-direction: column;
  justify-content: center; align-items: center;
  text-align: center;
  padding: 0 5vw;
  z-index: 10;
}

.hero h1 {
  font-size: clamp(2rem, 8vw, 4.5rem);
  margin-bottom: 1rem;
  letter-spacing: 1px;
  opacity: 0;
  animation: fadeInUp 1.2s ease forwards;
  background: linear-gradient(90deg, #fffde7, #fff9c4, #fffde7);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 15px rgba(255,255,220,0.8);
}

.hero p {
  font-size: clamp(0.9rem, 4vw, 1.4rem);
  max-width: 90%;
  margin: 0 auto 1.5rem;
  color: #f5f5f5;
  white-space: nowrap;
  animation: none; /* Typing trop long pour mobile */
  animation: typing 4s steps(40, end) 1s forwards, blink 0.8s step-end infinite;
}

/* CHOICES */
.choices {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem;
  opacity: 0;
  animation: fadeInUp 1s ease forwards 2s;
}

.choices a {
  padding: clamp(0.5rem, 2vw, 1rem) clamp(1rem, 4vw, 2rem);
  font-size: clamp(0.9rem, 2vw, 1.2rem);
  border-radius: 50px;
  text-decoration: none;
  color: #fff;
  backdrop-filter: blur(6px);
  border: 2px solid transparent;
  transition: all 0.4s ease;
  background: rgba(0,0,0,0.25);
  box-shadow: 0 0 25px rgba(255,255,255,0.2);
}

.choices a.palestine {
  border-color: #00b23d;
  background: rgba(0,122,61,0.5);
  text-shadow: 0 0 6px #00ff55;
}
.choices a.israel {
  border-color: #007aff;
  background: rgba(0,56,168,0.5);
  text-shadow: 0 0 6px #00cfff;
}
.choices a:hover {
  background: rgba(255,255,255,0.95);
  color: #000;
  transform: translateY(-5px) scale(1.05);
  box-shadow: 0 10px 30px rgba(255,255,255,0.5);
}

/* SUMMARY (si futur) */
.summary {
  max-width: 90%;
  margin: 4rem auto;
  padding: 2rem;
  background: #1a1a1a;
  border-radius: 15px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.7);
  opacity: 0;
  transform: translateY(80px);
  transition: all 1s ease;
}
.summary.show { opacity: 1; transform: translateY(0); }

/* ANIMATIONS */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(50px); }
  to { opacity: 1; transform: translateY(0); }
}

/* MISSILE & SMOKE */
model-viewer {
  position: absolute;
  width: clamp(30px, 10vw, 100px);
  height: clamp(30px, 10vw, 100px);
  transform: rotateZ(125deg);
  pointer-events: none;
  z-index: 100;
}

.smoke {
  position: absolute;
  width: clamp(10px, 2vw, 20px);
  height: clamp(10px, 2vw, 20px);
  border-radius: 50%;
  background: radial-gradient(circle, rgba(200,200,200,0.6) 20%, transparent 100%);
  filter: blur(6px);
  pointer-events: none;
  opacity: 0.7;
  animation: fadeOut 2s forwards;
  z-index: 5;
}
@keyframes fadeOut {
  from { transform: scale(1); opacity: 0.7; }
  to { transform: scale(3); opacity: 0; }
}

/* RESPONSIVE FIXES */
@media (max-width: 768px) {
  .hero h1 { font-size: clamp(1.5rem, 12vw, 3rem); }
  .hero p { font-size: clamp(0.8rem, 4vw, 1rem); }
  .choices a { padding: 0.5rem 1rem; font-size: clamp(0.8rem,3vw,1rem); }
  .hero { padding: 0 1rem; }
}


</style>
</head>
<body>

<canvas id="bg-canvas"></canvas>

<section class="hero">
  <h1>Histoire de l’autre</h1>
  <p>Deux peuples, deux récits. Plongez au cœur de leur histoire grâce à ce site.</p>
  <div class="choices">
    <a href="palestine.html" class="palestine">Palestine</a>
    <a href="israel.html" class="israel">Israël</a>
  </div>
</section>

<script>
const canvas = document.getElementById('bg-canvas');
const ctx = canvas.getContext('2d');

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

// Chargement drapeaux
const flags = { palestine: new Image(), israel: new Image() };
flags.palestine.src = 'img/img4.webp';
flags.israel.src = 'img/1.png';

// Particules
let particles = [];
function initParticles() {
  particles = [];
  for(let i=0;i<50;i++){
    particles.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height,
      speed: 0.2 + Math.random()*0.5,
      size: 1 + Math.random()*2,
      star: true
    });
  }
}
initParticles();

// Parallax
document.addEventListener('mousemove', (e) => {
  const x = (e.clientX / window.innerWidth - 0.5) * 10;
  const y = (e.clientY / window.innerHeight - 0.5) * 10;
  canvas.style.transform = `translate(${x}px, ${y}px) scale(1.02)`;
});

// Scroll reveal
const summary = document.querySelector('.summary');
window.addEventListener('scroll', () => {
  if(summary.getBoundingClientRect().top < window.innerHeight - 100){
    summary.classList.add('show');
  }
});

// --- Déclarations globales ---
const luneX = canvas.width*0.8;
const luneY = canvas.height*0.2;
const luneRadius = 50;
const baseColor = [255,255,220];
const colorsHalo = { base: baseColor, palestine:[255,0,0], israel:[0,102,204] };
const cycle = ["base","palestine","base","israel","base"];
const phaseTime = [200,200,200,200,200];
let phase = 0;
let frameCount = 0;

// Images des drapeaux
const imgPalestine = new Image();
imgPalestine.src = 'https://upload.wikimedia.org/wikipedia/commons/0/00/Flag_of_Palestine.svg';
const imgIsrael = new Image();
imgIsrael.src = 'https://upload.wikimedia.org/wikipedia/commons/d/d4/Flag_of_Israel.svg';

// Interpolations
function lerp(a,b,t){ return a + (b-a)*t; }
function lerpColor(c1,c2,t){ return [lerp(c1[0],c2[0],t), lerp(c1[1],c2[1],t), lerp(c1[2],c2[2],t)]; }

// Dessiner lune normale + halo
function drawMoon(color){
  const gradient = ctx.createRadialGradient(luneX,luneY,luneRadius,luneX,luneY,luneRadius*4);
  gradient.addColorStop(0, `rgba(${color[0]},${color[1]},${color[2]},0.15)`);
  gradient.addColorStop(1, `rgba(${color[0]},${color[1]},${color[2]},0)`);
  ctx.fillStyle = gradient;
  ctx.beginPath();
  ctx.arc(luneX,luneY,luneRadius*4,0,Math.PI*2);
  ctx.fill();

  ctx.fillStyle=`rgba(${color[0]},${color[1]},${color[2]},0.8)`;
  ctx.beginPath();
  ctx.arc(luneX,luneY,luneRadius,0,Math.PI*2);
  ctx.fill();
}

// Dessiner drapeau avec alpha
function drawFlag(flag,alpha=1){
  ctx.save();
  ctx.beginPath();
  ctx.arc(luneX,luneY,luneRadius,0,Math.PI*2);
  ctx.clip();
  ctx.globalAlpha = alpha;
  if(flag==="palestine") ctx.drawImage(imgPalestine,luneX-luneRadius,luneY-luneRadius,luneRadius*2,luneRadius*2);
  if(flag==="israel") ctx.drawImage(imgIsrael,luneX-luneRadius,luneY-luneRadius,luneRadius*2,luneRadius*2);
  ctx.restore();
}

// --- Animation principale ---
function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Calcul alpha et halo
  let t = frameCount/phaseTime[phase];
  let alpha = 0;
  const currentPhase = cycle[phase];

  if(currentPhase!=="base"){
    if(t<0.5) alpha = t*2;
    else alpha = (1-t)*2;
  }

  const halo = lerpColor(colorsHalo["base"],colorsHalo[currentPhase],alpha);
  drawMoon(halo);

  if(currentPhase==="palestine" || currentPhase==="israel"){
    drawFlag(currentPhase, alpha);
  }

  // Incrément frames
  frameCount++;
  if(frameCount>=phaseTime[phase]){
    frameCount = 0;
    phase = (phase+1)%cycle.length;
  }

  // Particules existantes...
  for(let p of particles){
    if(p.star){
      ctx.beginPath();
      ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
      ctx.fillStyle = `rgba(255,255,255,${Math.random()})`;
      ctx.fill();
      p.y += p.speed;
      if(p.y > canvas.height) p.y = -p.size;
    } else {
      ctx.drawImage(flags[p.flag],p.x,p.y,p.size,p.size*0.6);
      p.y += p.speed;
      if(p.y > canvas.height){
        p.y = -p.size;
        p.x = Math.random()*canvas.width;
        p.flag = Math.random()>0.5?'palestine':'israel';
      }
    }
  }

  requestAnimationFrame(animate);
}

// Lancer l'animation après chargement des images
imgPalestine.onload = () => imgIsrael.onload = animate;

</script>

<div class="scene" id="scene"></div>


<script>

  function spawnMissile() {
    const missile = document.createElement("model-viewer");
    missile.setAttribute("src", "models/missile.glb");
    missile.setAttribute("alt", "Missile 3D");
    missile.setAttribute("exposure", "1");
    missile.setAttribute("environment-image", "neutral");
    missile.setAttribute("shadow-intensity", "0");
    missile.style.transform = "rotateZ(125deg)";
    document.body.appendChild(missile);

    // départ haut de l’écran (10% à 30% hauteur)
    const startX = -100;
    const baseY = window.innerHeight * (Math.random() * 0.2 + 0.1); 
    

    const g = 9.81; // gravité fictive

    // vitesse aléatoire mais un peu plus rapide
    const v = Math.random() * 0.5 + 1.5;  // vitesse augmentée
    const angle = (Math.random() * 20 + 55) * (Math.PI/180); 

    const vx = v * Math.cos(angle) * window.innerWidth * 0.18; // vitesse horizontale boostée
    const vy = v * Math.sin(angle) * window.innerHeight * 0.07; // vitesse verticale boostée

    let start = null;

    function animateMissile(timestamp) {
      if (!start) start = timestamp;
      const t = (timestamp - start) / 300; 

      const x = startX + vx * t;
      const y = baseY + (vy * t + 0.5 * g * t * t);

      // appliquer positions
      missile.style.left = `${x}px`;
      missile.style.top = `${y}px`;

      // fumée derrière
   if (Math.random() < 1) {
    const smoke = document.createElement("div");
    smoke.className = "smoke";

    // couleur aléatoire de la fumée
    const smokeColors = [
        'rgba(200,200,200,0.6)', // gris classique
        'rgba(255,200,50,0.7)',  // jaune/orange
        'rgba(255,150,50,0.5)'   // plus chaud
    ];
    const color = smokeColors[Math.floor(Math.random()*smokeColors.length)];
    smoke.style.background = `radial-gradient(circle, ${color} 20%, transparent 100%)`;

    smoke.style.left = `${x - 10}px`;
    smoke.style.top = `${y + 20}px`;
    document.body.appendChild(smoke);
    setTimeout(() => smoke.remove(), 2000);
}
      // continuer tant qu'il est visible
      if (x < window.innerWidth + 200 && y < window.innerHeight + 200) {
        requestAnimationFrame(animateMissile);
      } else {
        missile.remove();
      }
    }

    
    requestAnimationFrame(animateMissile);
  }

  function spawnWave() {
    const nbMissiles = Math.floor(Math.random() * 1) + 4;
    for (let i = 0; i < nbMissiles; i++) {
      setTimeout(spawnMissile, i * 600);
    }
    const nextWaveDelay = Math.random() * 5000 + 8000;
    setTimeout(spawnWave, nextWaveDelay);
  }

  setTimeout(spawnWave, 2000);

</script>

<style>
  #plane {
    position: absolute;
    width: 50px;  /* ajuste la taille */
    height: auto;
    top: 20%;      /* hauteur initiale */
    left: -200px;  /* départ hors écran à gauche */
  }
</style>
</head>
<body>

<img id="plane" src="img/avion.png" alt="Avion">

<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Avions PNG par vagues</title>
<style>

  .plane {
    position: absolute;
    width: 50px;
    height: auto;
  }
</style>
</head>
<body>

<script>
const planeSrc = "img/avion.png"; // ton image avion

function spawnPlane() {
  const plane = document.createElement("img");
  plane.src = planeSrc;
  plane.className = "plane";
  document.body.appendChild(plane);

  // Hauteur aléatoire (10% à 40% de la fenêtre)
  const y = window.innerHeight * (Math.random() * 0.2 + 0.1);
  plane.style.top = y + 'px';

  let x = -50; // départ à gauche
  const speed = Math.random() * 6 + 2; // vitesse aléatoire 1 → 3 px/frame

  function animatePlane() {
    x += speed;
    plane.style.left = x + 'px';

    if (x < window.innerWidth + 50) {
      requestAnimationFrame(animatePlane);
    } else {
      plane.remove();
    }
  }

  animatePlane();
}

// Générer une vague d'avions
function spawnWave1() {
  const nbPlanes = Math.floor(Math.random() * 5) + 1; // 1 à 3 avions par vague
  for (let i = 0; i < nbPlanes; i++) {
    setTimeout(spawnPlane, i * 500); // petits décalages entre avions
  }

  // Délai aléatoire avant la prochaine vague (3 à 8 sec)
  const nextWaveDelay = Math.random() * 5000 + 10000;
  setTimeout(spawnWave1, nextWaveDelay);
}

// Lancer la première vague après 1 sec
setTimeout(spawnWave1, 1000);
</script>


</body>
</html>

</body>
</html>
